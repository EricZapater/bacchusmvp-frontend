import{u as w,b as B}from"./vue-router-b024814c.js";import{j as _,k,f as h,c as C,e as d,h as u,n as S,d as y,o as E,u as F,ax as T,M as N,l as I,a as D,P as M}from"./index-2bfc80b2.js";import{u as R}from"./purchaseInvoiceSeries-9b33d28d.js";import{u as P}from"./usetoast.esm-82b2df9e.js";import{F as m}from"./component-c8ee66ae.js";import{B as b}from"./BaseInput-95847e6b.js";import{c as $,a as V,F as g}from"./form-validator-1a569dfe.js";import"./index-78dd0e83.js";import"./base.service-8b4a1a4e.js";import"./suppliers.service-82e016ae.js";import"./runtime-dom.esm-bundler-0884c737.js";import"./_plugin-vue_export-helper-c27b6911.js";const A={key:0},U={class:"three-columns"},x=d("label",{class:"block text-900 mb-2"},"Desactivada",-1),j={class:"mt-2"},q=_({__name:"FormPurchaseInvoiceSerie",props:{purchaseInvoiceSerie:{}},emits:["submit","cancel"],setup(f,{emit:c}){const n=f,l=P(),p=$().shape({name:V().required("El nom de la sèrie és obligatori").max(50,"El nom de la sèrie no pot superar els 50 caràcters"),description:V().required("La descripció de la sèrie és obligatòria").max(250,"La descripció de la sèrie no pot superar els 50 caràcters")}),s=k({result:!1,errors:{}}),i=()=>{const e=new g(p);s.value=e.validate(n.purchaseInvoiceSerie)},v=async()=>{if(i(),s.value.result)c("submit",n.purchaseInvoiceSerie);else{let e="";Object.entries(s.value.errors).forEach(r=>{e+=`${r[1].map(a=>a)}.   `}),l.add({severity:"warn",summary:"Formulari inválid",detail:e,life:5e3})}};return(e,r)=>{const a=h("Checkbox"),t=h("Button");return e.purchaseInvoiceSerie?(E(),C("form",A,[d("div",U,[u(b,{name:"name",class:S(["mb-2",{"p-invalid":s.value.errors.name}]),label:"Nom de la sèrie",id:"name",modelValue:e.purchaseInvoiceSerie.name,"onUpdate:modelValue":r[0]||(r[0]=o=>e.purchaseInvoiceSerie.name=o)},null,8,["modelValue","class"]),u(b,{name:"description",class:S(["mb-2",{"p-invalid":s.value.errors.description}]),label:"Descripció",id:"description",modelValue:e.purchaseInvoiceSerie.description,"onUpdate:modelValue":r[1]||(r[1]=o=>e.purchaseInvoiceSerie.description=o)},null,8,["modelValue","class"]),d("div",null,[x,u(a,{modelValue:e.purchaseInvoiceSerie.disabled,"onUpdate:modelValue":r[2]||(r[2]=o=>e.purchaseInvoiceSerie.disabled=o),class:"w-full",binary:!0},null,8,["modelValue"])])]),d("div",j,[u(t,{label:"Guardar",class:"mr-2",onClick:v})])])):y("",!0)}}}),ee=_({__name:"PurchaseInvoiceSerie",setup(f){const c=k(m.EDIT),n=w(),l=B(),p=F(),s=R(),{purchaseInvoiceSerie:i}=T(s),v=async()=>{await s.fetchPurchaseInvoiceSerie(l.params.id);let a="";i.value?(c.value=m.EDIT,a=`Sèrie de facturació: ${i.value.name}`):(c.value=m.CREATE,s.setNewPurchaseInvoiceSerie(l.params.id),a="Alta de sèrie de facturació"),p.setMenuItem({icon:M.POUND,backButtonVisible:!0,text:a})};N(async()=>{await v()});const e=P(),r=async()=>{const a=i.value;let t=!1,o="";c.value===m.CREATE?(t=await s.createPurchaseInvoiceSerie(a),o="Sèrie de facturació creada correctament"):(t=await s.updatePurchaseInvoiceSerie(a.id,a),o="Sèrie de facturació actualizada correctament"),t&&(e.add({severity:"success",summary:o,life:5e3}),n.back())};return(a,t)=>I(i)?(E(),D(q,{key:0,purchaseInvoiceSerie:I(i),onSubmit:r},null,8,["purchaseInvoiceSerie"])):y("",!0)}});export{ee as default};
