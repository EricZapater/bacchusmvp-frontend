import{d as p,r as d,F as o,v as R,u as _,z as v,o as w,j as T,k as i,m as k,l as y,P as E,K as I,a as b}from"./index-6b09c644.js";import{_ as x}from"./FormReference.vue_vue_type_script_setup_true_lang-706dcccb.js";import{u as A}from"./reference-097bb997.js";import"./form-validator-73bea53e.js";import"./FileEntityPicker-90cefa40.js";import"./file.service-f78a3a51.js";import"./functions-13b40d42.js";import"./v4-a960c1f4.js";import"./tax-d8d9034f.js";import"./index-53cd0326.js";import"./base.service-5073802c.js";import"./reference.service-db1d3528.js";const P=p({__name:"Reference",setup(B){const c=d(o.EDIT),n=R(),m=_(),a=A(),{reference:r}=v(a),u=async()=>{await a.fetchReference(n.params.id);let e="";r.value?(c.value=o.EDIT,e=`Referència ${r.value.description}`):(c.value=o.CREATE,a.setNewReference(n.params.id),e="Alta de referència"),m.setMenuItem({icon:E.BUILDING,backButtonVisible:!0,title:e})};w(async()=>{await u()});const f=T(),l=async()=>{const e=r.value;let t=!1,s="";c.value===o.CREATE?(t=await a.createReference(e),t?s="Referència creada correctament":s="La referència + versió introduïda ja existeix"):(t=await a.updateReference(e.id,e),s="Referència actualizada correctament"),f.add({severity:t?"success":"warn",summary:s,life:5e3}),t&&I.back()};return(e,t)=>i(r)?(b(),k(x,{key:0,reference:i(r),onSubmit:l},null,8,["reference"])):y("",!0)}});export{P as default};
