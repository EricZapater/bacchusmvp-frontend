import{d as p,r as d,F as o,v as R,u as _,z as v,o as w,j as I,k as i,m as T,l as k,P as y,I as E,a as b}from"./index-193b38f8.js";import{_ as x}from"./FormReference.vue_vue_type_script_setup_true_lang-ec6fae64.js";import{u as A}from"./reference-245170a4.js";import"./form-validator-f563cc7d.js";import"./FileEntityPicker-3cca73d8.js";import"./file.service-634937aa.js";import"./functions-781c12cd.js";import"./v4-a960c1f4.js";import"./tax-8423781b.js";import"./index-02bc8c9e.js";import"./base.service-2dd42137.js";import"./reference.service-bbdc7d76.js";const P=p({__name:"Reference",setup(B){const c=d(o.EDIT),n=R(),m=_(),a=A(),{reference:r}=v(a),u=async()=>{await a.fetchReference(n.params.id);let e="";r.value?(c.value=o.EDIT,e=`Referència ${r.value.description}`):(c.value=o.CREATE,a.setNewReference(n.params.id),e="Alta de referència"),m.setMenuItem({icon:y.BUILDING,backButtonVisible:!0,title:e})};w(async()=>{await u()});const f=I(),l=async()=>{const e=r.value;let t=!1,s="";c.value===o.CREATE?(t=await a.createReference(e),t?s="Referència creada correctament":s="La referència + versió introduïda ja existeix"):(t=await a.updateReference(e.id,e),s="Referència actualizada correctament"),f.add({severity:t?"success":"warn",summary:s,life:5e3}),t&&E.back()};return(e,t)=>i(r)?(b(),T(x,{key:0,reference:i(r),onSubmit:l},null,8,["reference"])):k("",!0)}});export{P as default};
