import{d as x,g as I,u as N,j as D,x as S,o as q,P as l,h as i,m as M,w as c,k as d,a as W,e as u,i as s,C as p,D as _,n as A}from"./index-70c82e0d.js";import{u as E}from"./plantmodel-299ff652.js";import{v as P}from"./v4-a960c1f4.js";import"./base.service-c65b9c29.js";const R={class:"flex flex-wrap align-items-center justify-content-between gap-2"},j=u("span",{class:"text-xl text-900 font-bold"},"Màquines",-1),V=["onClick"],U=x({__name:"Workcenters",setup($){const m=I(),h=N(),f=D(),y=S(),a=E();q(async()=>{await a.fetchWorkcenters(),await a.fetchWorkcenterTypes(),await a.fetchAreas(),h.setMenuItem({icon:l.CALENDAR,title:"Gestió de màquines"})});const w=()=>{m.push({path:`/workcenter/${P()}`})},k=t=>{t.originalEvent.target.className.includes("grid_delete_column_button")||m.push({path:`/workcenter/${t.data.id}`})},C=t=>{var n;const o=(n=a.areas)==null?void 0:n.find(e=>e.id===t);return o?o.name:""},g=t=>{var n;const o=(n=a.workcenterTypes)==null?void 0:n.find(e=>e.id===t);return o?o.name:""},b=(t,o)=>{y.require({target:t.currentTarget,message:`Está segur que vol eliminar la màquina ${o.name}?`,icon:"pi pi-question-circle",acceptIcon:"pi pi-check",rejectIcon:"pi pi-times",accept:async()=>{await a.deleteWorkcenter(o.id)&&(f.add({severity:"success",summary:"Eliminat",life:3e3}),await a.fetchWorkcenters())}})};return(t,o)=>{const n=i("Button"),e=i("Column"),v=i("BooleanColumn"),B=i("DataTable");return W(),M(B,{value:d(a).workcenters,tableStyle:"min-width: 100%",scrollable:"",scrollHeight:"80vh",sortMode:"multiple",onRowClick:k},{header:c(()=>[u("div",R,[j,s(n,{icon:d(l).PLUS,rounded:"",raised:"",onClick:w},null,8,["icon"])])]),default:c(()=>[s(e,{field:"name",header:"Nom",style:{width:"20%"}}),s(e,{field:"description",header:"Descripció",style:{width:"40%"}}),s(e,{header:"Tipus",style:{width:"15%"}},{body:c(r=>[p(_(g(r.data.workcenterTypeId)),1)]),_:1}),s(e,{header:"Area",style:{width:"15%"}},{body:c(r=>[p(_(C(r.data.areaId)),1)]),_:1}),s(e,{header:"Desactivat",style:{width:"10%"}},{body:c(r=>[s(v,{value:r.data.disabled},null,8,["value"])]),_:1}),s(e,null,{body:c(r=>[u("i",{class:A([d(l).TIMES,"grid_delete_column_button"]),onClick:T=>b(T,r.data)},null,10,V)]),_:1})]),_:1},8,["value"])}}});export{U as default};
