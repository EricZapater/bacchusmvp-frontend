import{b as T}from"./vue-router-c71b0622.js";import{j as _,k,f as b,c as g,e as r,h as i,n as h,d as w,o as E,u as C,aw as I,M as N,l as v,a as A,P as D}from"./index-0e14a554.js";import{u as F}from"./usetoast.esm-2dfabc60.js";import{F as c}from"./component-45e7825d.js";import{r as $}from"./router-ca85fb13.js";import{B as M}from"./BaseInput-9aa79c5a.js";import{c as P,a as V,b as U,F as R}from"./form-validator-88e54800.js";import{u as S}from"./paymentMethod-328a547e.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./base.service-431caa23.js";const q={key:0},L={class:"two-columns"},j={class:"two-columns"},z=r("label",{class:"block text-900 mb-2"},"Dies +",-1),G=r("label",{class:"block text-900 mb-2"},"Desactivat",-1),O={class:"mt-2"},x=_({__name:"FormPaymentMethod",props:{paymentMethod:{}},emits:["submit","cancel"],setup(f,{emit:l}){const m=f,u=F(),s=P().shape({name:V().required("El nom és obligatori").max(250,"El nom comercial no pot superar els 250 carácters"),description:V().required("La descripció és obligatori").max(250,"La descripció no pot superar els 250 carácters"),daysToAdd:U().required("El dies + són obligatoris")}),t=k({result:!1,errors:{}}),p=()=>{const a=new R(s);t.value=a.validate(m.paymentMethod)},y=async()=>{if(p(),t.value.result)l("submit",m.paymentMethod);else{let a="";Object.entries(t.value.errors).forEach(e=>{a+=`${e[1].map(o=>o)}.   `}),u.add({severity:"warn",summary:"Formulari inválid",detail:a,life:5e3})}};return(a,e)=>{const o=b("InputNumber"),d=b("Checkbox"),B=b("Button");return a.paymentMethod?(E(),g("form",q,[r("div",L,[i(M,{class:h(["mb-2",{"p-invalid":t.value.errors.name}]),label:"Nom",id:"name",modelValue:a.paymentMethod.name,"onUpdate:modelValue":e[0]||(e[0]=n=>a.paymentMethod.name=n)},null,8,["modelValue","class"]),i(M,{class:h(["mb-2",{"p-invalid":t.value.errors.description}]),label:"Descripció",id:"description",modelValue:a.paymentMethod.description,"onUpdate:modelValue":e[1]||(e[1]=n=>a.paymentMethod.description=n)},null,8,["modelValue","class"])]),r("div",j,[r("div",null,[z,i(o,{modelValue:a.paymentMethod.daysToAdd,"onUpdate:modelValue":e[2]||(e[2]=n=>a.paymentMethod.daysToAdd=n),class:"w-full"},null,8,["modelValue"])]),r("div",null,[G,i(d,{modelValue:a.paymentMethod.disabled,"onUpdate:modelValue":e[3]||(e[3]=n=>a.paymentMethod.disabled=n),class:"w-full",binary:!0},null,8,["modelValue"])])]),r("div",O,[i(B,{label:"Guardar",class:"mr-2",onClick:y})])])):w("",!0)}}}),te=_({__name:"PaymentMethod",setup(f){const l=k(c.EDIT),m=T(),u=C(),s=S(),{paymentMethod:t}=I(s),p=async()=>{await s.fetchOne(m.params.id);let e="";t.value?(l.value=c.EDIT,e=`Forma de pagament ${t.value.name}`):(l.value=c.CREATE,s.setNew(m.params.id),e="Alta de forma de pagament"),u.setMenuItem({icon:D.BUILDING,backButtonVisible:!0,text:e})};N(async()=>{await p()});const y=F(),a=async()=>{const e=t.value;let o=!1,d="";l.value===c.CREATE?(o=await s.create(e),d="Forma de pagament creat correctament"):(o=await s.update(e.id,e),d="Forma de pagament actualizat correctament"),o&&(y.add({severity:"success",summary:d,life:5e3}),$.back())};return(e,o)=>v(t)?(E(),A(x,{key:0,"payment-method":v(t),onSubmit:a},null,8,["payment-method"])):w("",!0)}});export{te as default};
