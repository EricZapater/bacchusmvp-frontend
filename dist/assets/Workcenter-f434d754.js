import{d as p,r as k,F as s,v as f,u as _,z as v,o as w,j as M,h as T,k as u,m as W,l as y,P as E,L as I,a as b}from"./index-357c9d4c.js";import{u as C}from"./plantmodel-ce44b43b.js";import"./index-6fe49fa3.js";import"./base.service-d0780977.js";const S=p({__name:"Workcenter",setup(F){const n=k(s.EDIT),c=f(),i=_(),t=C(),{workcenter:a}=v(t),m=async()=>{await t.fetchWorkcenter(c.params.id);let e="";a.value?(n.value=s.EDIT,e=`Màquina: ${a.value.name}`):(n.value=s.CREATE,t.setNewWorkcenter(c.params.id),e="Alta de màquina"),i.setMenuItem({icon:E.BUILDING,backButtonVisible:!0,title:e})};w(async()=>{await m()});const l=M(),d=async()=>{const e=a.value;let r=!1,o="";n.value===s.CREATE?(r=await t.createWorkcenter(e),o="Màquina creada correctament"):(r=await t.updateWorkcenter(e.id,e),o="Màquina actualizada correctament"),r&&(l.add({severity:"success",summary:o,life:5e3}),I.back())};return(e,r)=>{const o=T("FormWorkcenter");return u(a)?(b(),W(o,{key:0,workcenter:u(a),onSubmit:d},null,8,["workcenter"])):y("",!0)}}});export{S as default};
