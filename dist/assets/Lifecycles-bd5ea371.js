import{d as g,g as k,u as x,o as B,P as d,j as S,h as s,m as E,w as l,k as r,a as D,e as u,i as t,n as R}from"./index-46043a45.js";import{u as $}from"./lifecycle-03facc4e.js";import{v as N}from"./v4-a960c1f4.js";import"./index-7b8f1609.js";import"./base.service-1c5fc4fe.js";const T={class:"flex flex-wrap align-items-center justify-content-between gap-2"},I=u("span",{class:"text-xl text-900 font-bold"},"Cicles de vida",-1),L=["onClick"],_="lifecycle",F=g({__name:"Lifecycles",setup(M){const m=k(),f=x(),e=$();B(async()=>{await e.fetchAll(),f.setMenuItem({icon:d.REFRESH,title:"Gestió de cicles de vida"})});const p=()=>{m.push({path:`/${_}/${N()}`})},h=o=>{o.originalEvent.target.className.includes("grid_delete_column_button")||m.push({path:`/${_}/${o.data.id}`})},y=S(),v=async(o,i)=>{var a;if(await e.fetchOne(i.id),!e.lifecycle||e.lifecycle.statuses.length>0||e.transitions.length>0){y.add({summary:"Eliminar cicle de vida",detail:`El cicle de vida ${(a=e.lifecycle)==null?void 0:a.name} té dependencies`,severity:"warn",life:5e3});return}await e.delete(i.id)};return(o,i)=>{const a=s("Button"),n=s("Column"),C=s("BooleanColumn"),w=s("DataTable");return D(),E(w,{value:r(e).lifecycles,tableStyle:"min-width: 100%",onRowClick:h},{header:l(()=>[u("div",T,[I,t(a,{icon:r(d).PLUS,rounded:"",raised:"",onClick:p},null,8,["icon"])])]),default:l(()=>[t(n,{field:"name",header:"Nom",style:{width:"33%"}}),t(n,{field:"description",header:"Descripció",style:{width:"33%"}}),t(n,{header:"Desactivat",style:{width:"33%"}},{body:l(c=>[t(C,{value:c.data.disabled,showColor:!1},null,8,["value"])]),_:1}),t(n,null,{body:l(c=>[u("i",{class:R([r(d).TIMES,"grid_delete_column_button"]),onClick:b=>v(b,c.data)},null,10,L)]),_:1})]),_:1},8,["value"])}}});export{F as default};
