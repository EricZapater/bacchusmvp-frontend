import{d as p,r as d,F as o,v as R,u as _,z as v,o as w,j as T,k as i,m as k,l as y,P as E,K as I,a as b}from"./index-f2f50ed2.js";import{_ as x}from"./FormReference.vue_vue_type_script_setup_true_lang-00aa420a.js";import{u as A}from"./reference-a3279674.js";import"./form-validator-929472fd.js";import"./FileEntityPicker-111325b9.js";import"./file.service-77395578.js";import"./functions-13b40d42.js";import"./v4-a960c1f4.js";import"./tax-fd4f47ea.js";import"./index-ac3219c8.js";import"./base.service-1bae7a9f.js";import"./reference.service-20fd0224.js";const P=p({__name:"Reference",setup(B){const c=d(o.EDIT),n=R(),m=_(),a=A(),{reference:r}=v(a),u=async()=>{await a.fetchReference(n.params.id);let e="";r.value?(c.value=o.EDIT,e=`Referència ${r.value.description}`):(c.value=o.CREATE,a.setNewReference(n.params.id),e="Alta de referència"),m.setMenuItem({icon:E.BUILDING,backButtonVisible:!0,title:e})};w(async()=>{await u()});const f=T(),l=async()=>{const e=r.value;let t=!1,s="";c.value===o.CREATE?(t=await a.createReference(e),t?s="Referència creada correctament":s="La referència + versió introduïda ja existeix"):(t=await a.updateReference(e.id,e),s="Referència actualizada correctament"),f.add({severity:t?"success":"warn",summary:s,life:5e3}),t&&I.back()};return(e,t)=>i(r)?(b(),k(x,{key:0,reference:i(r),onSubmit:l},null,8,["reference"])):y("",!0)}});export{P as default};
