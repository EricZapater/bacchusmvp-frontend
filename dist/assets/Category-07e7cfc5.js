import{c as g}from"./category.service-66f7e8e3.js";import{u as f,_,r as c,o as v,c as b,a as o,b as a,w as l,F as V,d as m}from"./index-7b16a937.js";const D={name:"categroy-list",setup(){return{confirm:f()}},data(){return{ret:null,categories:[],currentCategory:{id:0,code:"",description:"",account:"",active:!1},currentIndex:-1,display:!1}},methods:{fetchData(){g.getAll().then(s=>{this.categories=s.data}).catch(s=>{console.log(s)})},onRowSelect(s){this.currentCategory=s.data},openDialog(s){s!==0?(this.currentCategory=this.categories.find(({id:e})=>e===s),this.display=!0):(this.resetData(),this.fetchData(),this.display=!0)},closeDialog(){this.display=!1},resetData(){this.currentCategory.id=0,this.currentCategory.code="",this.currentCategory.description="",this.currentCategory.account="",this.currentCategory.active=!1},save(){this.currentCategory.id===0?g.create(this.currentCategory).then(s=>{s.status===null&&this.$toast.add({severity:"error",summary:"Error Message",detail:"Error al crear el registre: ",life:3e3}),s.status===201&&(this.$toast.add({severity:"success",summary:"Succes Message",detail:"Registre creat",life:3e3}),this.fetchData())}):g.update(this.currentCategory).then(s=>{s.status===null&&this.$toast.add({severity:"error",summary:"Error Message",detail:"Error a l'actualitzar el registre: ",life:3e3}),s.status===201&&(this.$toast.add({severity:"success",summary:"Succes Message",detail:"Registre actualitzat",life:3e3}),this.fetchData())}),this.fetchData(),this.closeDialog()},drop(s){this.currentCategory=this.categories.find(({id:e})=>e===s),this.confirm.require({message:"Vols esborrar el registre seleccionat?"+this.currentCategory.code,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{g.delete(s).then(e=>{e.status===202&&(this.$toast.add({severity:"success",summary:"Succes Message",detail:"Registre eliminat correctament",life:3e3}),this.fetchData())})},reject:()=>{},onHide:()=>{}})}},mounted(){this.fetchData()}},x={class:"grid p-fluid"},k=o("div",{class:"col-12 md:col-11"},null,-1),w={class:"col-12 md:col-1"},U={class:"row"},A={class:"grid p-fluid"},R={class:"col-12 md:col-4"},F={class:"p-inputgroup"},S=o("span",{class:"p-inputgroup-addon"}," Codi: ",-1),B={class:"col-12 md:col-8"},E={class:"p-inputgroup"},T=o("span",{class:"p-inputgroup-addon"}," Descripció: ",-1),M={class:"col-12 md:col-6"},N={class:"p-inputgroup"},I=o("span",{class:"p-inputgroup-addon"}," Compte comptable: ",-1),z={class:"col-12 md:col-"},j={class:"p-inputgroup"},q={class:"p-inputgroup-addon"},G=o("div",{class:"col-12 md:col-8"},null,-1),H={class:"col-12 md:col-2"},L={class:"col-12 md:col-2"};function J(s,e,K,O,i,r){const n=c("Button"),d=c("Column"),p=c("InputText"),h=c("Checkbox"),y=c("DataTable"),C=c("Dialog");return v(),b(V,null,[o("div",x,[k,o("div",w,[a(n,{label:"Afegir",icon:"pi pi-add",class:"p-button-success",onClick:e[0]||(e[0]=t=>r.openDialog(0))})])]),o("div",U,[a(y,{value:i.categories,selection:i.currentCategory,"onUpdate:selection":e[1]||(e[1]=t=>i.currentCategory=t),datakey:"id",stripedRows:"",responsiveLayout:"scroll",paginator:!0,showGridlines:"",rows:10,filterDisplay:"menu",globalFilterFields:["description"],onRowClick:r.onRowSelect},{empty:l(()=>[m(" No hi ha categories. ")]),loading:l(()=>[m(" Carregant categories, si us plau espereu. ")]),default:l(()=>[a(d,{field:"code",header:"Codi",sortable:!0}),a(d,{field:"description",header:"Descripció"},{filter:l(({filterModel:t})=>[a(p,{type:"text",modelValue:t.value,"onUpdate:modelValue":u=>t.value=u,class:"p-column-filter",placeholder:"Search by name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(d,{field:"account",header:"Codi",sortable:!0}),a(d,{field:"active",header:"Actiu",sortable:!0},{body:l(t=>[a(h,{modelValue:t.data.active,"onUpdate:modelValue":u=>t.data.active=u,binary:!0,disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(d,{field:"id",header:"",style:{"text-align":"right"}},{body:l(t=>[a(n,{label:"",icon:"pi pi-pencil",onClick:u=>r.openDialog(t.data.id)},null,8,["onClick"]),m("    "),a(n,{label:"",icon:"pi pi-trash",onClick:u=>r.drop(t.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","onRowClick"]),a(C,{header:"Categoria d'article",visible:i.display,"onUpdate:visible":e[8]||(e[8]=t=>i.display=t)},{default:l(()=>[o("div",null,[o("div",A,[o("div",R,[o("div",F,[S,a(p,{placeholder:"Codi",modelValue:i.currentCategory.code,"onUpdate:modelValue":e[2]||(e[2]=t=>i.currentCategory.code=t)},null,8,["modelValue"])])]),o("div",B,[o("div",E,[T,a(p,{placeholder:"Descripció",modelValue:i.currentCategory.description,"onUpdate:modelValue":e[3]||(e[3]=t=>i.currentCategory.description=t)},null,8,["modelValue"])])]),o("div",M,[o("div",N,[I,a(p,{placeholder:"Codi",modelValue:i.currentCategory.account,"onUpdate:modelValue":e[4]||(e[4]=t=>i.currentCategory.account=t)},null,8,["modelValue"])])]),o("div",z,[o("div",j,[o("span",q,[a(h,{modelValue:i.currentCategory.active,"onUpdate:modelValue":e[5]||(e[5]=t=>i.currentCategory.active=t),binary:!0},null,8,["modelValue"]),m("   Activa ")])])]),G,o("div",H,[a(n,{label:"Acceptar",onClick:e[6]||(e[6]=t=>r.save())})]),o("div",L,[a(n,{label:"Cancelar",onClick:e[7]||(e[7]=t=>r.closeDialog())})])])])]),_:1},8,["visible"])])],64)}const X=_(D,[["render",J]]);export{X as default};
