import{d as y,r as i,F as s,v as S,g as w,u as k,z as x,o as A,j as E,k as l,m as I,l as b,P as h,a as B}from"./index-7c1e9124.js";import{_ as C}from"./FormReference.vue_vue_type_script_setup_true_lang-7a57f9af.js";import{u as M}from"./reference-bdd6ffa5.js";import{u as g}from"./tax-6478eba8.js";import{u as D}from"./referenceType-16270a14.js";import"./form-validator-f8953ae6.js";import"./_commonjsHelpers-725317a4.js";import"./DropdownCustomers.vue_vue_type_script_setup_true_lang-f25c76f5.js";import"./customers-392120c2.js";import"./base.service-14be693f.js";import"./FileEntityPicker-f7ae8736.js";import"./file.service-f7800d99.js";import"./functions-2e154ea4.js";import"./v4-a960c1f4.js";import"./reference.service-0677d75e.js";import"./index-bb0ab5e1.js";const X=y({__name:"Reference",setup(F){const c=i(s.EDIT),u=S(),f=w(),p=k(),d=g(),r=M(),R=D(),{reference:a}=x(r),n=i(""),m=i(""),v=async()=>{await r.fetchReference(n.value),d.fetchAll(),R.fetchAll();let e="";a.value?(c.value=s.EDIT,e=`Referència ${a.value.description}`):(c.value=s.CREATE,r.setNewReference(n.value),e="Alta de referència"),p.setMenuItem({icon:h.BUILDING,backButtonVisible:!0,title:e})};A(async()=>{n.value=u.params.id,m.value=u.params.module,await v()});const _=E(),T=async()=>{const e=a.value;let t=!1,o="";c.value===s.CREATE?(t=await r.createReference(e),t?o="Referència creada correctament":o="La referència + versió introduïda ja existeix"):(t=await r.updateReference(e.id,e),o="Referència actualizada correctament"),_.add({severity:t?"success":"warn",summary:o,life:5e3}),t&&f.back()};return(e,t)=>l(a)?(B(),I(C,{key:0,module:m.value,reference:l(a),onSubmit:T},null,8,["module","reference"])):b("",!0)}});export{X as default};
