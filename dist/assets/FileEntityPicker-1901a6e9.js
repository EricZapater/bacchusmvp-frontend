import{F as B}from"./file.service-3235a4bb.js";import{M as N,a as n,c as l,e as t,K as f,N as p,O as P,d as I,j as L,x as S,r as z,o as A,h as O,i as w,w as g,k as o,G as T,Q as x,D as h,P as r,n as u,l as k,f as M}from"./index-98d6f8aa.js";import{b as G}from"./functions-552e18f7.js";var V={root:"p-toolbar p-component",start:"p-toolbar-group-start p-toolbar-group-left",center:"p-toolbar-group-center",end:"p-toolbar-group-end p-toolbar-group-right"},W=N.extend({name:"toolbar",classes:V}),q={name:"BaseToolbar",extends:P,props:{ariaLabelledby:{type:String,default:null}},style:W,provide:function(){return{$parentInstance:this}}},F={name:"Toolbar",extends:q,inheritAttrs:!1},U=["aria-labelledby"];function j(e,c,m,b,d,v){return n(),l("div",p({class:e.cx("root"),role:"toolbar","aria-labelledby":e.ariaLabelledby},e.ptmi("root")),[t("div",p({class:e.cx("start")},e.ptm("start")),[f(e.$slots,"start")],16),t("div",p({class:e.cx("center")},e.ptm("center")),[f(e.$slots,"center")],16),t("div",p({class:e.cx("end")},e.ptm("end")),[f(e.$slots,"end")],16)],16,U)}F.render=j;const K={class:"base_input"},Q={class:"file_viewer_title"},R={class:"file-viewer"},H={class:"file-viewer-item-type"},J={class:"file-viewer-item-actions"},X=["onClick"],Y=["onClick"],Z=I({__name:"FileEntityPicker",props:{title:{},entity:{},id:{}},setup(e){const c=e,m=L(),b=S(),d=new B,v=z(void 0),y=async()=>{v.value=await d.GetEntityFiles(c.entity,c.id)};A(async()=>{await y()});const E=async()=>{const a=document.createElement("input");a.type="file",a.onchange=async i=>{const _=i.target.files[0];if(!await d.Upload(_,c.entity,c.id)){m.add({severity:"error",detail:"Error al carregar l'arxiu"});return}await y()},a.click()},$=async a=>{const i=await d.Download(a);G(a.originalName,i)},C=async a=>{b.require({message:"EstÃ  segur que vol eliminar l'arxiu seleccionat",accept:async()=>{var i=await d.Delete(a.id);if(!i){m.add({severity:"error",detail:"Error al eliminar l'arxiu"});return}await y()}})};return(a,i)=>{const _=O("Button");return n(),l("div",K,[w(o(F),null,{start:g(()=>[t("p",Q,h(a.title),1)]),end:g(()=>[w(_,{size:"small",rounded:"",icon:o(r).UPLOAD,onClick:E},null,8,["icon"])]),_:1}),t("section",R,[(n(!0),l(T,null,x(v.value,s=>(n(),l("article",{class:"file-viewer-item",key:a.id},[t("div",H,[s.type===0?(n(),l("i",{key:0,class:u(s.originalName.endsWith("docx")?o(r).FILE_WORD:o(r).FILE_PDF),style:{"font-size":"3.5rem"}},null,2)):k("",!0),s.type===1?(n(),l("i",{key:1,class:u(o(r).IMAGE),style:{"font-size":"3.5rem"}},null,2)):k("",!0),t("p",null,h(s.originalName.substring(0,20)),1)]),t("div",J,[t("div",{class:"file-viewer-item-action file-viewer-item-action-download",onClick:D=>$(s)},[t("i",{class:u(o(r).DOWNLOAD),style:{"font-size":"1rem"}},null,2)],8,X),t("div",{class:"file-viewer-item-action file-viewer-item-action-delete",onClick:D=>C(s)},[t("i",{class:u(o(r).TIMES)},null,2)],8,Y)])]))),128))])])}}});const se=M(Z,[["__scopeId","data-v-5c7d0e4a"]]);export{se as F};
