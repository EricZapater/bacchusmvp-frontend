import{e as u}from"./eventstatus.service-fd44a834.js";import{u as g,_ as S,r as n,o as E,c as y,a,b as i,w as r,F as b,d as p}from"./index-7b16a937.js";const C={name:"eventstatus-ist",setup(){return{confirm:g()}},data(){return{eventStatuses:[],currentEventStatus:{id:0,code:"",description:"",active:!1},currentIndex:-1,display:!1}},methods:{fetchData(){u.getAll().then(t=>{this.eventStatuses=t.data}).catch(t=>{console.log(t)})},onRowSelect(t){this.currentEventStatus=t.data},openDialog(t){t!==0?(this.currentEventStatus=this.eventStatuses.find(({id:e})=>e===t),this.display=!0):(this.resetData(),this.fetchData(),this.display=!0)},closeDialog(){this.display=!1},resetData(){this.currentEventStatus.id=0,this.currentEventStatus.code="",this.currentEventStatus.description="",this.currentEventStatus.active=!1},save(){this.currentEventStatus.id===0?u.create(this.currentEventStatus).then(t=>{t.status===null&&this.$toast.add({severity:"error",summary:"Error Message",detail:"Error al crear el registre: ",life:3e3}),t.status===201&&(this.$toast.add({severity:"success",summary:"Succes Message",detail:"Registre creat",life:3e3}),this.fetchData())}):u.update(this.currentEventStatus).then(t=>{t.status===null&&this.$toast.add({severity:"error",summary:"Error Message",detail:"Error a l'actualitzar el registre: ",life:3e3}),t.status===201&&(this.$toast.add({severity:"success",summary:"Succes Message",detail:"Registre actualitzat",life:3e3}),this.fetchData())}),this.fetchData(),this.closeDialog()},drop(t){this.currentEventStatus=this.eventStatuses.find(({id:e})=>e===t),this.$confirm.require({message:"Vols esborrar el registre seleccionat?"+this.currentEventStatus.code,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{u.delete(t).then(e=>{e.status===202&&(this.$toast.add({severity:"success",summary:"Succes Message",detail:"Registre eliminat correctament",life:3e3}),this.fetchData())})},reject:()=>{},onHide:()=>{}})}},mounted(){this.fetchData()}},D={class:"grid p-fluid"},x=a("div",{class:"col-12 md:col-11"},null,-1),V={class:"col-12 md:col-1"},k={class:"row"},w={class:"grid p-fluid"},A={class:"col-12 md:col-4"},R={class:"p-inputgroup"},U=a("span",{class:"p-inputgroup-addon"}," Codi: ",-1),B={class:"col-12 md:col-8"},F={class:"p-inputgroup"},M=a("span",{class:"p-inputgroup-addon"}," Descripció ",-1),T={class:"col-12 md:col-2"},N={class:"p-inputgroup"},I={class:"p-inputgroup-addon"},z=a("div",{class:"col-12 md:col-6"},null,-1),j={class:"col-12 md:col-2"},q={class:"col-12 md:col-2"};function G(t,e,H,L,o,l){const c=n("Button"),d=n("Column"),h=n("Checkbox"),f=n("DataTable"),m=n("InputText"),_=n("Dialog");return E(),y(b,null,[a("div",D,[x,a("div",V,[i(c,{label:"Afegir",icon:"pi pi-add",class:"p-button-success",onClick:e[0]||(e[0]=s=>l.openDialog(0))})])]),a("div",k,[i(f,{value:o.eventStatuses,selection:o.currentEventStatus,"onUpdate:selection":e[1]||(e[1]=s=>o.currentEventStatus=s),datakey:"id",stripedRows:"",responsiveLayouts:"scroll",paginator:!0,showGridlines:"",rows:10,onRowClick:l.onRowSelect},{empty:r(()=>[p(" No hi ha estats. ")]),loading:r(()=>[p(" Carregant estats, si us plau espereu. ")]),default:r(()=>[i(d,{field:"code",header:"Codi",sortable:!0}),i(d,{field:"description",header:"Descripció"}),i(d,{field:"active",header:"Actiu",sortable:!0},{body:r(s=>[i(h,{modelValue:s.data.active,"onUpdate:modelValue":v=>s.data.active=v,binary:!0,disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(d,{field:"id",header:""},{body:r(s=>[i(c,{label:"",icon:"pi pi-pencil",onClick:v=>l.openDialog(s.data.id)},null,8,["onClick"]),p("    "),i(c,{label:"",icon:"pi pi-trash",onClick:v=>l.drop(s.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","onRowClick"]),i(_,{header:"Estats d'events",visible:o.display,"onUpdate:visible":e[7]||(e[7]=s=>o.display=s)},{default:r(()=>[a("div",null,[a("div",w,[a("div",A,[a("div",R,[U,i(m,{placeholder:"Codi",modelValue:o.currentEventStatus.code,"onUpdate:modelValue":e[2]||(e[2]=s=>o.currentEventStatus.code=s)},null,8,["modelValue"])])]),a("div",B,[a("div",F,[M,i(m,{placeholder:"Descripció",modelValue:o.currentEventStatus.description,"onUpdate:modelValue":e[3]||(e[3]=s=>o.currentEventStatus.description=s)},null,8,["modelValue"])])]),a("div",T,[a("div",N,[a("span",I,[i(h,{modelValue:o.currentEventStatus.active,"onUpdate:modelValue":e[4]||(e[4]=s=>o.currentEventStatus.active=s),binary:!0},null,8,["modelValue"]),p("    Actiu ")])])]),z,a("div",j,[i(c,{label:"Acceptar",onClick:e[5]||(e[5]=s=>l.save())})]),a("div",q,[i(c,{label:"Cancelar",onClick:e[6]||(e[6]=s=>l.closeDialog())})])])])]),_:1},8,["visible"])])],64)}const O=S(C,[["render",G]]);export{O as default};
