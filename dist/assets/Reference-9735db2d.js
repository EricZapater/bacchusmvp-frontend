import{d as R,r as m,F as s,v,u as _,z as w,o as I,j as T,k as u,m as k,l as y,P as E,I as b,a as x}from"./index-0571db4e.js";import{_ as A}from"./FormReference.vue_vue_type_script_setup_true_lang-23a73606.js";import{u as B}from"./reference-b0e46642.js";import"./form-validator-ccb03a07.js";import"./FileEntityPicker-4a21d27b.js";import"./file.service-d85f359a.js";import"./functions-8d6e0d81.js";import"./v4-a960c1f4.js";import"./tax-8c820a0c.js";import"./index-f40c31d1.js";import"./base.service-d337ec0f.js";import"./reference.service-ffaf5819.js";const $=R({__name:"Reference",setup(C){const c=m(s.EDIT),n=v(),f=_(),t=B(),{reference:r}=w(t),i=m(""),l=async()=>{await t.fetchReference(n.params.id);let e="";r.value?(c.value=s.EDIT,e=`Referència ${r.value.description}`):(c.value=s.CREATE,t.setNewReference(n.params.id),e="Alta de referència"),f.setMenuItem({icon:E.BUILDING,backButtonVisible:!0,title:e})};I(async()=>{i.value=n.params.module,await l()});const d=T(),p=async()=>{const e=r.value;let a=!1,o="";c.value===s.CREATE?(a=await t.createReference(e),a?o="Referència creada correctament":o="La referència + versió introduïda ja existeix"):(a=await t.updateReference(e.id,e),o="Referència actualizada correctament"),d.add({severity:a?"success":"warn",summary:o,life:5e3}),a&&b.back()};return(e,a)=>u(r)?(x(),k(A,{key:0,module:i.value,reference:u(r),onSubmit:p},null,8,["module","reference"])):y("",!0)}});export{$ as default};
