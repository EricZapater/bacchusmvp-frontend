import{d as S,r as B,H as C,h as R,m as c,w as p,a as i,e as h,i as n,y as F,k,P as g,l as m,D as $,n as E,p as N,b as H,f as D,g as U,v as z,u as A,o as K}from"./index-3e5d5186.js";import{u as T}from"./reference-66e6a90e.js";import{v as L}from"./v4-a960c1f4.js";import"./reference.service-a0354458.js";import"./base.service-5289f73f.js";const j=u=>(N("data-v-da8bd56e"),u=u(),H(),u),q={class:"references-header"},G={class:"references-filter"},J=j(()=>h("label",null,"Codi",-1)),O=["onClick"],Q=S({__name:"TableReferences",props:{module:{},references:{}},emits:["add","edit","delete"],setup(u,{emit:f}){const r=u,v=T(),s=B({code:""}),e=C(()=>r.module==="sales"),_=C(()=>r.module==="purchase");C(()=>r.module==="production");const w=C(()=>r.references?s.value.code.length>0?r.references.filter(a=>a.code.includes(s.value.code)):v.references:[]),b=()=>{f("add")},o=a=>{a.originalEvent.target.className.includes("grid_delete_column_button")||f("edit",a.data)},I=(a,l)=>{f("delete",l)},x=a=>{var y;const l=(y=v.referenceFormats)==null?void 0:y.find(t=>t.id===a);return l?l.description:""};return(a,l)=>{const y=R("Button"),t=R("Column"),V=R("BooleanColumn"),M=R("DataTable");return i(),c(M,{value:w.value,tableStyle:"min-width: 100%",scrollable:"",scrollHeight:"80vh",onRowClick:o},{header:p(()=>[h("div",q,[h("div",G,[J,n(F,{modelValue:s.value.code,"onUpdate:modelValue":l[0]||(l[0]=d=>s.value.code=d)},null,8,["modelValue"])]),n(y,{style:{float:"right"},icon:k(g).PLUS,rounded:"",raised:"",onClick:b},null,8,["icon"])])]),default:p(()=>[n(t,{field:"code",header:"Codi",style:{width:"15%"}}),n(t,{field:"description",header:"Descripció",style:{width:"35%"}}),n(t,{field:"version",header:"Versió",style:{width:"15%"}}),e.value?(i(),c(t,{key:0,field:"cost",header:"Cost",style:{width:"20%"}})):m("",!0),e.value?(i(),c(t,{key:1,field:"price",header:"Preu",style:{width:"20%"}})):m("",!0),_.value?(i(),c(t,{key:2,field:"referenceFormatId",header:"Format",style:{width:"10%"}},{body:p(d=>[h("span",null,$(x(d.data.referenceFormatId)),1)]),_:1})):m("",!0),_.value?(i(),c(t,{key:3,field:"density",header:"Densitat",style:{width:"10%"}})):m("",!0),_.value?(i(),c(t,{key:4,field:"lastPurchaseCost",header:"Última Compra",style:{width:"15%"}})):m("",!0),n(t,{header:"Desc.",style:{width:"10%"}},{body:p(d=>[n(V,{value:d.data.disabled},null,8,["value"])]),_:1}),n(t,{style:{width:"10%"}},{body:p(d=>[h("i",{class:E([k(g).TIMES,"grid_delete_column_button"]),onClick:P=>I(P,d.data)},null,10,O)]),_:1})]),_:1},8,["value"])}}});const W=D(Q,[["__scopeId","data-v-da8bd56e"]]),X=S({__name:"References",setup(u){const f=U(),r=z(),v=A(),s=T(),e=B("");K(async()=>{e.value=r.params.module,await s.fetchReferencesByModule(e.value);let o="";e.value==="sales"?o="Referencies de venta":e.value==="purchase"?o="Materies primes":e.value==="production"&&(o="Referencies de producció"),v.setMenuItem({icon:g.TICKET,title:o})});const _=()=>{f.push({path:`/reference/${e.value}/${L()}`})},w=o=>{f.push({path:`/reference/${e.value}/${o.id}`})},b=async o=>{await s.deleteReference(o.id),await s.fetchReferencesByModule(e.value)};return(o,I)=>(i(),c(W,{module:e.value,references:k(s).references,onAdd:_,onEdit:w,onDelete:b},null,8,["module","references"]))}});const se=D(X,[["__scopeId","data-v-7ee85d82"]]);export{se as default};
