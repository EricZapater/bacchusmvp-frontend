import{d as w,o as E,j as h,z as B,r as C,h as _,k as s,c as N,e as m,i as p,n as T,y as V,l as x,a as F,F as u,v as O,u as D,m as S,P as $,K as g}from"./index-6b09c644.js";import{c as A,a as k,F as R}from"./form-validator-73bea53e.js";import{u as I}from"./plantmodel-905a21c0.js";import"./base.service-5073802c.js";const U={key:0},z={class:"three-columns"},L=m("label",{class:"block text-900 mb-2"},"Desactivat",-1),P={class:"mt-2"},j=w({__name:"FormOperatorType",props:{operatortype:{}},emits:["submit","cancel"],setup(v,{emit:n}){const i=v;E(async()=>{await r.fetchOperatorTypes()});const d=h(),r=I(),{operatorType:e}=B(r),y=A().shape({name:k().required("El nom és obligatori").max(250,"El nom no pot superar els 250 carácters"),description:k().required("La descripció és obligatori").max(250,"La descripció pot superar els 250 carácters")}),l=C({result:!1,errors:{}}),f=()=>{const o=new R(y);l.value=o.validate(i.operatortype)},t=async()=>{if(f(),l.value.result)n("submit",i.operatortype);else{let o="";Object.entries(l.value.errors).forEach(a=>{o+=`${a[1].map(b=>b)}.   `}),d.add({severity:"warn",summary:"Formulari inválid",detail:o,life:5e3})}};return(o,a)=>{const b=_("Checkbox"),M=_("Button");return s(e)?(F(),N("form",U,[m("section",z,[p(V,{class:T(["mb-2",{"p-invalid":l.value.errors.name}]),label:"Nom",id:"name",modelValue:s(e).name,"onUpdate:modelValue":a[0]||(a[0]=c=>s(e).name=c)},null,8,["modelValue","class"]),p(V,{class:T(["mb-2",{"p-invalid":l.value.errors.description}]),label:"Descripció",id:"description",modelValue:s(e).description,"onUpdate:modelValue":a[1]||(a[1]=c=>s(e).description=c)},null,8,["modelValue","class"]),m("div",null,[L,p(b,{modelValue:s(e).disabled,"onUpdate:modelValue":a[2]||(a[2]=c=>s(e).disabled=c),class:"w-full",binary:!0},null,8,["modelValue"])])]),m("div",P,[p(M,{label:"Guardar",class:"mr-2",onClick:t})])])):x("",!0)}}}),H=w({__name:"operatortype",setup(v){const n=C(u.EDIT),i=O(),d=D(),r=I(),{operatorType:e}=B(r),y=async()=>{await r.fetchWorkcenterType(i.params.id);let t="";e.value?(n.value=u.EDIT,t=`Tipus d'operari: ${e.value.name}`):(n.value=u.CREATE,r.setNewOperatorType(i.params.id),t="Alta de tipus d' operari"),d.setMenuItem({icon:$.BUILDING,backButtonVisible:!0,title:t})};E(async()=>{await y()});const l=h(),f=async()=>{const t=e.value;let o=!1,a="";n.value===u.CREATE?(o=await r.createOperatorType(t),a="Tipus d'operari creat correctament"):(o=await r.updateOperatorType(t.id,t),a="Tipus d'operari actualizat correctament"),o&&(l.add({severity:"success",summary:a,life:5e3}),g.back())};return(t,o)=>s(e)?(F(),S(j,{key:0,operatortype:s(e),onSubmit:f},null,8,["operatortype"])):x("",!0)}});export{H as default};
