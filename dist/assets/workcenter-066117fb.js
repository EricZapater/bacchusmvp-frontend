import{d as k,r as p,F as s,v as f,u as w,z as _,o as v,j as M,h as I,k as u,m as T,l as y,P as E,I as W,a as b}from"./index-b6e64d2e.js";import{u as C}from"./plantmodel-43423bab.js";import"./base.service-be1b6049.js";const R=k({__name:"workcenter",setup(F){const n=p(s.EDIT),c=f(),i=w(),t=C(),{workcenter:a}=_(t),m=async()=>{await t.fetchWorkcenter(c.params.id);let e="";a.value?(n.value=s.EDIT,e=`Màquina: ${a.value.name}`):(n.value=s.CREATE,t.setNewWorkcenter(c.params.id),e="Alta de màquina"),i.setMenuItem({icon:E.BUILDING,backButtonVisible:!0,title:e})};v(async()=>{await m()});const l=M(),d=async()=>{const e=a.value;let r=!1,o="";n.value===s.CREATE?(r=await t.createWorkcenter(e),o="Màquina creada correctament"):(r=await t.updateWorkcenter(e.id,e),o="Màquina actualizada correctament"),r&&(l.add({severity:"success",summary:o,life:5e3}),W.back())};return(e,r)=>{const o=I("FormWorkcenter");return u(a)?(b(),T(o,{key:0,workcenter:u(a),onSubmit:d},null,8,["workcenter"])):y("",!0)}}});export{R as default};
