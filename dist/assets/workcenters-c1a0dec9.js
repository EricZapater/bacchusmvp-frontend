import{d as T,g as I,u as N,j as D,x as S,o as q,P as l,h as i,m as E,w as c,k as d,a as M,e as u,i as a,C as p,D as _,n as A}from"./index-ecb5eec1.js";import{u as P}from"./plantmodel-a16c13f9.js";import{v as R}from"./v4-a960c1f4.js";import"./base.service-88077886.js";const W={class:"flex flex-wrap align-items-center justify-content-between gap-2"},j=u("span",{class:"text-xl text-900 font-bold"},"Màquines",-1),V=["onClick"],F=T({__name:"workcenters",setup($){const m=I(),f=N(),h=D(),y=S(),r=P();q(async()=>{await r.fetchWorkcenters(),f.setMenuItem({icon:l.CALENDAR,title:"Gestió de màquines"})});const w=()=>{m.push({path:`/workcenter/${R()}`})},k=t=>{t.originalEvent.target.className.includes("grid_delete_column_button")||m.push({path:`/workcenter/${t.data.id}`})},C=t=>{var o;const n=(o=r.areas)==null?void 0:o.find(e=>e.id===t);return n?n.name:""},g=t=>{var o;const n=(o=r.workcenterTypes)==null?void 0:o.find(e=>e.id===t);return n?n.name:""},b=(t,n)=>{y.require({target:t.currentTarget,message:`Está segur que vol eliminar la màquina ${n.name}?`,icon:"pi pi-question-circle",acceptIcon:"pi pi-check",rejectIcon:"pi pi-times",accept:async()=>{await r.deleteWorkcenter(n.id)&&(h.add({severity:"success",summary:"Eliminat",life:3e3}),await r.fetchWorkcenters())}})};return(t,n)=>{const o=i("Button"),e=i("Column"),v=i("BooleanColumn"),B=i("DataTable");return M(),E(B,{value:d(r).workcenters,tableStyle:"min-width: 100%",onRowClick:k},{header:c(()=>[u("div",W,[j,a(o,{icon:d(l).PLUS,rounded:"",raised:"",onClick:w},null,8,["icon"])])]),default:c(()=>[a(e,{field:"name",header:"Nom",style:{width:"20%"}}),a(e,{field:"description",header:"Descripció",style:{width:"40%"}}),a(e,{header:"Tipus",style:{width:"15%"}},{body:c(s=>[p(_(g(s.data.workcenterTypeId)),1)]),_:1}),a(e,{header:"Area",style:{width:"15%"}},{body:c(s=>[p(_(C(s.data.areaId)),1)]),_:1}),a(e,{header:"Desactivat",style:{width:"10%"}},{body:c(s=>[a(v,{value:s.data.disabled},null,8,["value"])]),_:1}),a(e,null,{body:c(s=>[u("i",{class:A([d(l).TIMES,"grid_delete_column_button"]),onClick:x=>b(x,s.data)},null,10,V)]),_:1})]),_:1},8,["value"])}}});export{F as default};
