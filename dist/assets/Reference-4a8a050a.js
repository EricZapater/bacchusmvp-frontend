import{d as p,r as d,F as o,v as R,u as _,z as v,o as w,j as T,k as i,m as k,l as y,P as E,L as I,a as b}from"./index-ecb5eec1.js";import{_ as x}from"./FormReference.vue_vue_type_script_setup_true_lang-43bb55d8.js";import{u as A}from"./reference-b28c3841.js";import"./form-validator-1d21b93c.js";import"./FileEntityPicker-8ff26f87.js";import"./file.service-e1e5760a.js";import"./functions-781c12cd.js";import"./v4-a960c1f4.js";import"./tax-ecc6bb2f.js";import"./index-9785c663.js";import"./base.service-88077886.js";import"./reference.service-65331f94.js";const P=p({__name:"Reference",setup(B){const c=d(o.EDIT),n=R(),m=_(),a=A(),{reference:r}=v(a),u=async()=>{await a.fetchReference(n.params.id);let e="";r.value?(c.value=o.EDIT,e=`Referència ${r.value.description}`):(c.value=o.CREATE,a.setNewReference(n.params.id),e="Alta de referència"),m.setMenuItem({icon:E.BUILDING,backButtonVisible:!0,title:e})};w(async()=>{await u()});const f=T(),l=async()=>{const e=r.value;let t=!1,s="";c.value===o.CREATE?(t=await a.createReference(e),t?s="Referència creada correctament":s="La referència + versió introduïda ja existeix"):(t=await a.updateReference(e.id,e),s="Referència actualizada correctament"),f.add({severity:t?"success":"warn",summary:s,life:5e3}),t&&I.back()};return(e,t)=>i(r)?(b(),k(x,{key:0,reference:i(r),onSubmit:l},null,8,["reference"])):y("",!0)}});export{P as default};
