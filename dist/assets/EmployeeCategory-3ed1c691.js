import{e as p}from"./employeecategory.service-6781a1ba.js";import{u as v,_ as E,r as n,o as b,c as D,a as e,b as l,w as r,F as V,d,t as _}from"./index-51c744d9.js";const x={name:"categroy-list",setup(){return{confirm:v()}},data(){return{ret:null,employeecategories:[],currentEmployeeCategory:{id:0,code:"",description:"",account:"",salePrice:0,costPrice:0,active:!1},currentIndex:-1,display:!1}},methods:{fetchData(){p.getAll().then(s=>{console.log(s.data),this.employeecategories=s.data}).catch(s=>{console.log(s)})},onRowSelect(s){this.currentEmployeeCategory=s.data},openDialog(s){s!==0?(this.currentEmployeeCategory=this.employeecategories.find(({id:t})=>t===s),this.display=!0):(this.resetData(),this.fetchData(),this.display=!0)},closeDialog(){this.display=!1},resetData(){this.currentEmployeeCategory.id=0,this.currentEmployeeCategory.code="",this.currentEmployeeCategory.description="",this.currentEmployeeCategory.account="",this.currentEmployeeCategory.active=!1},save(){this.currentEmployeeCategory.id===0?p.create(this.currentEmployeeCategory).then(s=>{s.status===null&&this.$toast.add({severity:"error",summary:"Error Message",detail:"Error al crear el registre: ",life:3e3}),s.status===201&&(this.$toast.add({severity:"success",summary:"Succes Message",detail:"Registre creat",life:3e3}),this.fetchData())}):p.update(this.currentEmployeeCategory).then(s=>{s.status===null&&this.$toast.add({severity:"error",summary:"Error Message",detail:"Error a l'actualitzar el registre: ",life:3e3}),s.status===201&&(this.$toast.add({severity:"success",summary:"Succes Message",detail:"Registre actualitzat",life:3e3}),this.fetchData())}),this.fetchData(),this.closeDialog()},drop(s){this.currentEmployeeCategory=this.employeecategories.find(({id:t})=>t===s),this.confirm.require({message:"Vols esborrar el registre seleccionat?"+this.currentEmployeeCategory.code,header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{p.delete(s).then(t=>{t.status===202&&(this.$toast.add({severity:"success",summary:"Succes Message",detail:"Registre eliminat correctament",life:3e3}),this.fetchData())})},reject:()=>{},onHide:()=>{}})},formatCurrency(s){return s.toLocaleString("es-ES",{style:"currency",currency:"EUR"})}},mounted(){this.fetchData()}},k={class:"grid p-fluid"},P=e("div",{class:"col-12 md:col-11"},null,-1),F={class:"col-12 md:col-1"},U={class:"row"},S={class:"grid p-fluid"},A={class:"col-12 md:col-4"},R={class:"p-inputgroup"},w=e("span",{class:"p-inputgroup-addon"}," Codi: ",-1),N={class:"col-12 md:col-8"},B={class:"p-inputgroup"},I=e("span",{class:"p-inputgroup-addon"}," Descripció: ",-1),M={class:"col-12 md:col-6"},T={class:"p-inputgroup"},z=e("span",{class:"p-inputgroup-addon"}," Compte comptable: ",-1),L={class:"col-12 md:col-3"},j={class:"p-inputgroup"},q=e("span",{class:"p-inputgroup-addon"}," Preu de cost: ",-1),G=e("span",{class:"p-inputgroup-addon"},"€",-1),H={class:"col-12 md:col-3"},J={class:"p-inputgroup"},K=e("span",{class:"p-inputgroup-addon"}," Preu de venta: ",-1),O=e("span",{class:"p-inputgroup-addon"},"€",-1),Q={class:"col-12 md:col-2"},W={class:"p-inputgroup"},X={class:"p-inputgroup-addon"},Y=e("div",{class:"col-12 md:col-10"},null,-1),Z=e("div",{class:"col-12 md:col-8"},null,-1),$={class:"col-12 md:col-2"},ee={class:"col-12 md:col-2"};function te(s,t,oe,se,i,a){const u=n("Button"),c=n("Column"),g=n("Checkbox"),C=n("DataTable"),m=n("InputText"),h=n("InputNumber"),f=n("Dialog");return b(),D(V,null,[e("div",k,[P,e("div",F,[l(u,{label:"Afegir",icon:"pi pi-add",class:"p-button-success",onClick:t[0]||(t[0]=o=>a.openDialog(0))})])]),e("div",U,[l(C,{value:i.employeecategories,selection:i.currentEmployeeCategory,"onUpdate:selection":t[1]||(t[1]=o=>i.currentEmployeeCategory=o),datakey:"id",stripedRows:"",responsiveLayout:"scroll",paginator:!0,showGridlines:"",rows:10,onRowClick:a.onRowSelect},{empty:r(()=>[d(" No hi ha categories. ")]),loading:r(()=>[d(" Carregant categories, si us plau espereu. ")]),default:r(()=>[l(c,{field:"code",header:"Codi",sortable:!0}),l(c,{field:"description",header:"Descripció"}),l(c,{field:"account",header:"Compte comptable",sortable:!0}),l(c,{field:"costPrice",header:"Preu Cost",sortable:!0,mode:"decimal",minFractionDigits:2,maxFractionDigits:2},{body:r(o=>[d(_(a.formatCurrency(o.data.costPrice)),1)]),_:1}),l(c,{field:"salePrice",header:"Preu Venta",sortable:!0,mode:"decimal",minFractionDigits:2,maxFractionDigits:2},{body:r(o=>[d(_(a.formatCurrency(o.data.salePrice)),1)]),_:1}),l(c,{field:"active",header:"Actiu",sortable:!0},{body:r(o=>[l(g,{modelValue:o.data.active,"onUpdate:modelValue":y=>o.data.active=y,binary:!0,disabled:!0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(c,{field:"id",header:""},{body:r(o=>[l(u,{label:"",icon:"pi pi-pencil",onClick:y=>a.openDialog(o.data.id)},null,8,["onClick"]),d("    "),l(u,{label:"",icon:"pi pi-trash",onClick:y=>a.drop(o.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","onRowClick"]),l(f,{header:"Categoria d'article",visible:i.display,"onUpdate:visible":t[10]||(t[10]=o=>i.display=o)},{default:r(()=>[e("div",null,[e("div",S,[e("div",A,[e("div",R,[w,l(m,{placeholder:"Codi",modelValue:i.currentEmployeeCategory.code,"onUpdate:modelValue":t[2]||(t[2]=o=>i.currentEmployeeCategory.code=o)},null,8,["modelValue"])])]),e("div",N,[e("div",B,[I,l(m,{placeholder:"Descripció",modelValue:i.currentEmployeeCategory.description,"onUpdate:modelValue":t[3]||(t[3]=o=>i.currentEmployeeCategory.description=o)},null,8,["modelValue"])])]),e("div",M,[e("div",T,[z,l(m,{placeholder:"Compte Comptable",modelValue:i.currentEmployeeCategory.account,"onUpdate:modelValue":t[4]||(t[4]=o=>i.currentEmployeeCategory.account=o)},null,8,["modelValue"])])]),e("div",L,[e("div",j,[q,l(h,{placeholder:"Cost Price",mode:"decimal",minFractionDigits:2,maxFractionDigits:2,modelValue:i.currentEmployeeCategory.costPrice,"onUpdate:modelValue":t[5]||(t[5]=o=>i.currentEmployeeCategory.costPrice=o),currency:"EUR",locale:"es-ES"},null,8,["modelValue"]),G])]),e("div",H,[e("div",J,[K,l(h,{placeholder:"Sale Price",mode:"decimal",minFractionDigits:2,maxFractionDigits:2,modelValue:i.currentEmployeeCategory.salePrice,"onUpdate:modelValue":t[6]||(t[6]=o=>i.currentEmployeeCategory.salePrice=o),currency:"EUR",locale:"es-ES"},null,8,["modelValue"]),O])]),e("div",Q,[e("div",W,[e("span",X,[l(g,{modelValue:i.currentEmployeeCategory.active,"onUpdate:modelValue":t[7]||(t[7]=o=>i.currentEmployeeCategory.active=o),binary:!0},null,8,["modelValue"]),d("   Activa ")])])]),Y,Z,e("div",$,[l(u,{label:"Acceptar",onClick:t[8]||(t[8]=o=>a.save())})]),e("div",ee,[l(u,{label:"Cancelar",onClick:t[9]||(t[9]=o=>a.closeDialog())})])])])]),_:1},8,["visible"])])],64)}const ae=E(x,[["render",te]]);export{ae as default};
